<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Buscar Viaje</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Viaje Actual -->
  <ion-card *ngIf="viajeActual">
    <ion-card-header>
      <ion-card-title>Tu Viaje Actual</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item lines="none">
        <ion-label>
          <h2>Destino: {{viajeActual.destino}}</h2>
          <p>Conductor: {{viajeActual.nombreConductor}} {{viajeActual.apellidoConductor}}</p>
          <p>Fecha: {{viajeActual.fecha}} - {{viajeActual.hora}}</p>
          <p>Precio: ${{viajeActual.precio}}</p>
        </ion-label>
      </ion-item>
      <ion-button expand="block" color="danger" (click)="cancelarViaje()">
        Cancelar Viaje
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Lista de Viajes Disponibles -->
  <ion-list>
    <ion-list-header>
      <ion-label>Viajes Disponibles</ion-label>
    </ion-list-header>

    <ion-card *ngFor="let viaje of viajes">
      <ion-card-content>
        <ion-item lines="none">
          <ion-label>
            <h2>Destino: {{viaje.destino}}</h2>
            <p><strong>Conductor:</strong> {{viaje.nombreConductor}} {{viaje.apellidoConductor}}</p>
            <p><strong>Fecha:</strong> {{viaje.fecha}} - {{viaje.hora}}</p>
            <p><strong>Asientos disponibles:</strong> {{viaje.asientosDisponibles}}</p>
            <p><strong>Precio:</strong> ${{viaje.precio}}</p>
          </ion-label>
        </ion-item>
        <div class="ion-text-end">
          <ion-button 
            (click)="tomarViaje(viaje)" 
            [disabled]="viajeActual !== null"
            color="primary">
            Tomar Viaje
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Mensaje cuando no hay viajes disponibles -->
    <ion-item *ngIf="viajes.length === 0" lines="none">
      <ion-label class="ion-text-center">
        No hay viajes disponibles en este momento
      </ion-label>
    </ion-item>
  </ion-list>
</ion-content>